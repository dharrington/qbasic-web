// Copyright 2018 Google LLC
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     https://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

import { Buffer, ICharmap } from "./screen";

enum CharmapName {
    k8x8,
    k8x16,
    k8x14,
}

const charmapData: string[] = [
    // 8x8
    `ff818193efc7efff00ff00f0c3c080e77ffde79980c1ffe7e7e7ffffffffffffffcf9393cfffc79fe79ffffffffffff983cf8787e303c7038787ffffe7ff9f87ff7e0001c783efff00c33cf899cc9c241ff1c399249cffc3c3e7e7cfffdbe700ff8793938339939fcfcf99cffffffff3398f3333c33f9f333333cfcfcfffcf33ff5a240183c7c7e7189966f099c080c307c1819924c7ff8181e7f39f3f99c300ff8793013f33c73f9fe7c3cfffffffe731cff3f393073ff33333cfcf9f03e7f3ff7e0001010183c33cbd428299cf9c180101e7998493ffe7e7e701013f008181ffcfff9387e789ff9fe70003ff03ffcf21cfc7c733f307e78783ffff3ffff3e7ff423c83830101c33cbd4233c3cf9c1807c1e799e4938181e781f39f3f9900c3ffcfff01f3cf23ff9fe7c3cfffffff9f09cf9ff301f333cf33f3ffff9fffe7cfff6618c7c72983e718996633e78f98c31ff181ffe4c781c3e7c3e7cf01db00e7ffffff93079933ffcfcf99cfcfffcf3f19cf3333f33333cf33e7cfcfcf03cfffff7e00efefefefff00c33c33810f19247ffdc399e43381e7e7e7ffffffffffffffcfff93cf3989ffe79fffffcfffcf7f83030387e18787cf878fcfcfe7ff9fcfff8181ffffc7c7ff00ff0087e71f3fe7ffffe7ffff87ff00ffffffffffffffffffffffffffffffffffffffff9fffffffffffffffffffffffffffff9fffffffff83cf03c3070101c33387e1190f3939c70387038703333339393301873f87efffcfff1fffe3ffc7ff1fcff31f8fffffffffffffffefffffffffffffe3e71f89ff39879999939d9d9933cff3999f111993993399334b3333393933399f9fe7c7ffcfff9ffff3ff93ff9fffff9fcfffffffffffffffcfffffffffffffcfe7cf23ef2133993f9997973f33cff3939f0109399933999fcf3333399333739fcfe793ffe7879f87f3879f89938ff399cf3307872389238383333339393303cfe7cfffc72133833f9987873f03cff3879f012139833383cfcf333329c787e79fe7e739fffff3833383330f3389cff393cf0133339933893fcf3333299333671fffe3ff932103993f9997973133cf33939d2931399f2393e7cf333301c7cfcd9ff3e7ffffff83993f33039f3399cff387cf01333399339987cf333301c733cfcfe7cfff393f339999939d9f9933cf3399993939939f879933cf33871193cf999ff9e7ffffff339933333f9f8399cf3393cf29333383839ff3cb33870193839bcfe7cfff39873303c307010fc133878719013939c70fe319878703cf3939870187fd87ffffff89238789870ff319873319873933879ff30f07e789cf9339f303e3e71fff01ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00ffffffffffffff07ffff87ffffffffff0fe1ffffffffffffff07ffffffffffff87ffe381331fcfff81331f33831f39cfe3ffc187ffff87ffff3c33e7c73307f1e3c7ffffff03c3c7cfffff3c3ce7ffffddaa24e7e7e7c9ffffc9c9ffc9c9e7ff3333ff3cffffcfff3cffffff39ffc7cfffff9333331f331f33e7ffe7933333e4ffffe3e307ff9393ffffff3939e7cc33775588e7e7e7c9ffffc9c9ffc9c9e7ff3fff87c387878787c387878fc78f93ff038033ffffffffffffc333819b8733e7878fffffff339393cfffff3333ff9999ddaa24e7e707c9ff0709c90109c907ff333333f9f3f3f33f993333cfe7cf39879ff30187878733333399333f0f0305c3f3cf87330713c1c79f03032124e733cc775511e7e7e7c9ffe7f9c9f9f9c9e7ff873303c18383833f810303cfe7cf013387803333333333333399333f9fcf39e783cf33333303ffff3f3ff3ccc8e79999ddaa24e7070709010709c90901010707e7333f99333333879f3f3fcfe7cf39039f3333333333333383c33381190330e733cf333333238183333ff39990e7cc33775588e7e7e7c9c9e7c9c9c9ffffffe7f38187c0818181f3c3878787c38739330380318787878181f3e787e703cf3927818787813333ffff87ffff3330e7ffffddaa24e7e7e7c9c9e7c9c9c9ffffffe787ffffffffffffc7ffffffffffffffffffffffffffffffff07ffffe7ffcf388ffffffffffffffffffffffff0fcffffff775511e7e7e7c9c9e7c9c9c9ffffffe7e7e7ffe7ffe7e7c9c9ffc9ffc9ffc9e7c9ffffc9e7ffffc9e7e7ff00ff0ff000ffffffff03ffffff03c7c7e3fff9c787ffcf9fe7f1e7cfffc7fffff0878fffffe7e7ffe7ffe7e7c9c9ffc9ffc9ffc9e7c9ffffc9e7ffffc9e7e7ff00ff0ff000ff87030133ff9989cf9393cffff39f3303cfcfcfe4e7cf8993fffff393e7ffffe7e7ffe7ffe7e0c9c8c00800c8000800c900ffc9e0e0ffc900e7ff00ff0ff000893333939f819923873939e781813f33ff03e79fe4e7ff2393fffff393cfc3ffe7e7ffe7ffe7e7c9cfcfffffcfffffffc9ffffc9e7e7ffc9e7e7ff00ff0ff00023073f93cf2799e7330139832424073303cfcfcfe7e703ffc7e7fff3939fc3ffe00000e00000e0c8c0c80008c8000800000000c0e0e0c0000007e000000ff0ff37333f939f2799e73339933324243f33ffcf9fe7e7e7ff89ffe7e7139387c3ffffffe7e7ffe7e7c9ffc9ffc9c9ffc9ffffe7c9ffffe7c9c9e7ffe700000ff0ff23073f93332783e78793933381819f3303ffffffe727cf23ffffff93ffffc3ffffffe7e7ffe7e7c9ffc9ffc9c9ffc9ffffe7c9ffffe7c9c9e7ffe700000ff0ff893f3f93038f9fe7cfc71187ff9fc733ff030303e727cfffffffffc3ffffffffffffe7e7ffe7e7c9ffc9ffc9c9ffc9ffffe7c9ffffe7c9c9e7ffe700000ff0ffff3fffffffff3fff03ffffffff3fffffffffffffe78fffffffffffe3ffffffff`,
    // 8x16
    `ffffffffffffffff00ff00ffffffffffffffffffffffffffffffffffffffffffffffffffe7ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00ff00ffffffffff7ffdffffff83ffffffffffffffffffffffff99ffe7ffffcfffffffffffffffffffffffffffffffffffffffffffffffffff8181ffffffffff00ff00e1c3c080ff3ff9e7998039ffe7e7e7ffffffffffffffe799ff83ffc7cff3cfffffffffffffc7e78383f301c7018383ffffffffff83ff7e00ffffe7e7ff00ff00f199cc9ce71ff1c399249fffc3c3e7ffffffffffffffc3999339ff93cfe7e7ffffffffffff93c73939e33f9f393939fffff9ff9f39ff5a2493efc3c3ff00ff00e599c080e70fe1819924c7ff8181e7ffffffffef01ffc3db933d3d939fcff3fffffffffffd3987f9f9c33f3ff93939e7e7f3ffcf39ff7e0001c7c381ff00c33ccd99cf9c2407c1e7992493ffe7e7e7e7cfffd7c701ffc3ff013f39c7ffcff399e7fffffff939e7f3f9933f3ff93939e7e7e781e7f3ff7e0001831800e71899668799cf9cc30101e7998439ffe7e7e7f39f3f93c783ffe7ff9383f389ffcff3c3e7fffffff329e7e7c3330303f38381ffffcffff3e7ff423c01011800c33cbd4233c3cf9c1807c1e799e439ffe7e7e701013f018383ffe7ff93f9e723ffcff30081ff01ffe729e7cff901f939e739f9ffff9ffff9e7ff661801831881c33cbd4233e7cf9cc30fe18199e4930181e7e7f39f3f9383c7ffe7ff93f9cf33ffcff3c3e7ffffffcf39e79ff9f3f939cf39f9ffffcf81f3e7ff7e0083c7e7e7e718996633818f98241ff1c3ffe4c701c3e781e7cf01d701c7ffffff01799f33ffcff399e7e7ffff9f39e73ff9f3f939cf39f9e7e7e7ffe7ffff7e00c7efe7e7ff00c33c33e70f18e73ff9e799e4f301e7e7c3ffffffff01efffe7ff93393933ffe7e7ffffe7ffe73f93e73939f33939cf39f3e7e7f3ffcfe7ff8181efffc3c3ff00ff0087e71f19e77ffdff99e4390181e7e7ffffffffffffffe7ff93837989fff3cfffffe7ffe77fc7810183e18383cf8387ffcff9ff9fe7ffffffffffffffff00ff00ffffff3fffffffffffff83ffffffffffffffffffffffffffffe7ffffffffffffffcfffffffffffffffffffffffffffffffffffffffffffffffffffffff00ff00ffffffffffffffffffffffffffffffffffffffffffffffffffe7ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00ff00ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00ff00ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffefffcfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc7ffcfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffef03c3070101c339c3e1190f3939830383038381393939399901c3ffc393ffe7ff1fffe3ffc7ff1fe7f91fc7ffffffffffffffeffffffffffffff1e78f89ff83c799999399999939e7f3999f1119399939993981393939399939cf7ff339ffffff9ffff3ff93ff9fe7f99fe7ffffffffffffffcfffffffffffffe7e7e723ff3993993d999d9d3d39e7f3999f01093999399939a5393939939979cf3ff3ffffffff9ffff3ff9bff9fffff9fe7ffffffffffffffcfffffffffffffe7e7e7ffef3939993f9997973f39e7f3939f0101399939999fe73939398399f3cf1ff3ffffff878783c3839f8993c7f199e71323832389238303339939393901e7e7e7ffc72139833f9987873f01e7f3879f292139833983c7e7393929c7c3e7cf8ff3fffffff3933993390f3389e7f993e701993999338939cf3399399339338ffff1ff932101993f9997972139e7f3879f3931399f3993f3e7393929c7e7cfcfc7f3ffffff83993f33019f3399e7f987e72999399933999fcf339929c739e7e7e7e7ff392139993f999f9f3939e733939f3939399f3999f9e739392983e79fcfe3f3ffffff33993f333f9f3399e7f987e729993999339fc7cf339929c739cfe7e7e7ff392339993d999d9f3939e733999d3939399f299939e739930193e73dcff1f3ffffff33993f333f9f3399e7f993e729993999339ff3cf339929c7399fe7e7e7ff393f39999993999f9939e73399993939399f219939e739c71139e739cff9f3ffffff33993933399f3399e7f999e729993999339f39c933c301933939e7e7e7ff01833903c307010fc539c38719013939830f831983c383ef9339c301c3fdc3ffffff89838389830f8319c3f919c339998383830f83e389e793398101f1e78ffffffffffffffffffffffffffffffffffffffff3fffffffffffffffffffffffffffffffffffffffffff3ffff99ffffffffff9ff3fffffffffffffff9fffffffffffffffffffffffffffffffffffffffffffffff1ffffffffffffffffffffffffff00ffffffffffffff33ffff99ffffffffff9ff3fffffffffffffff3ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff87ffffc3ffffffffff0fe1ffffffffffffff07ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc7e7ffffffffffffffffffffffffffffffffffffffff89ffffffffffffffffffffeeaa22e7e7e7c9ffffc9c9ffc9c9e7fffffff3efff9fc7ffefff9fffe79f3993cfffffefff9fcf9fff3939e7c7ff07f1e7f3e7e7ff23c3c7ffffff3f3fffffffbb5588e7e7e7c9ffffc9c9ffc9c9e7ffc333e7c733cf93ffc739cf99c3cfffc79fffc1c739cf87cf39ffffe7939933e4cfe7cfcf89ff9393cfffff3f3fe7ffffeeaa22e7e7e7c9ffffc9c9ffc9c9e7ff99ffcf93ffe7c7ff93ffe7ff99e7efffffff9393ffe733e7ff8339c39b9933e79fcf9f9f23399393cfffff3d3de7ffffbb5588e7e7e7c9ffffc9c9ffc9c9e7ff3dffffffffffffc3ffffffffffffc7c701ff33ffffffffffff3939999fc307e7ffffffffff19c1c7ffffff3939ffffffeeaa22e7e7e7c9ffffc9c9ffc9c9e7ff3f33838787878799838383c7c7c7939399333383838333333939399f0fe73be787c783332309ffffcfffff3333e7c927bb5588e7e707c9ff0709c90109c907ff3f3339f3f3f3f39f393939e7e7e739399f890139393933333939399f9f813381f3e7393399018183cf0101e7e7e79393eeaa22e7e7e7c9ffe7f9c9f9f9c9e7ff3f3301838383839f010101e7e7e7393983c93339393933333939399f9fe721e783e739339921ffff9f3ff9cfcfe727c9bb5588e7070709010709c909010107073d333f33333333993f3f3fe7e7e701019f81333939393333393939999f8133e733e739339931ffff3f3ff99f99c39393eeaa22e7e7e7c9c9e7c9c9c9ffffffe799333f33333333c33f3f3fe7e7e739399f27333939393333393939c39fe733e733e739339939ffff393ff92331c3c927bb5588e7e7e7c9c9e7c9c9c9ffffffe7c3333933333333f3393939e7e7e739399927333939393333393939e719e733e733e739339939ffff393ff97961c3ffffeeaa22e7e7e7c9c9e7c9c9c9ffffffe7f3898389898989f9838383c3c3c339390191318383838989818383e703e739e789c383899939ffff83fffff3c1e7ffffbb5588e7e7e7c9c9e7c9c9c9ffffffe7f9ffffffffffffc3fffffffffffffffffffffffffffffffff9ffffffffffff27ffffffffffffffffffffffe7f9ffffffeeaa22e7e7e7c9c9e7c9c9c9ffffffe783fffffffffffffffffffffffffffffffffffffffffffffff3ffffffffffff8fffffffffffffffffffffffc1f9ffffffbb5588e7e7e7c9c9e7c9c9c9ffffffe7ffffffffffffffffffffffffffffffffffffffffffffffff87ffffffffffffffffffffffffffffffffffffffffffffffeeaa22e7e7e7c9c9e7c9c9c9ffffffe7ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffbb5588e7e7e7c9c9e7c9c9c9ffffffe7e7e7ffe7ffe7e7c9c9ffc9ffc9ffc9e7c9ffffc9e7ffffc9e7e7ff00ff0ff000ffffffffffffffffffffffffffffffffffffffffffe7ffffffffffffffffffffe7e7ffe7ffe7e7c9c9ffc9ffc9ffc9e7c9ffffc9e7ffffc9e7e7ff00ff0ff000ffffffffffffffffffffffffffffffffffffffffffe7ffffc7fffff0278fffffe7e7ffe7ffe7e7c9c9ffc9ffc9ffc9e7c9ffffc9e7ffffc9e7e7ff00ff0ff000ff8701ffffffffffffffc7e1ffffe3fffffffffff1e7ffff93fffff39327ffffe7e7ffe7ffe7e7c9c9ffc9ffc9ffc9e7c9ffffc9e7ffffc9e7e7ff00ff0ff000ff3339ff01ffffff81c793cffffccf83ffffcff3e4e7ffff93fffff393cfffffe7e7ffe7ffe7e7c9c9ffc9ffc9ffc9e7c9ffffc9e7ffffc9e7e7ff00ff0ff000ff33390139ff9989e79339e7fff99f3901e7e7e7e4e7e7ffc7fffff3939f83ffe7e7ffe7ffe7e0c9c8c00800c8000800c900ffc9e0e0ffc900e7ff00ff0ff00089333f939f819923c33939f381819f39ffe7f3cfe7e7e789fffffff3933783ffe7e7ffe7ffe7e7c9cfcfffffcfffffffc9ffffc9e7e7ffc9e7e7ff00ff0ff00023273f93cf2799e7993939c124248339ff81f99fe7e7ff23fffffff3930783ffe00000e00000e0c8c0c80008c8000800000000c0e0e0c0000007e000000ff0ff27333f93e72799e79901939924249f3901e7f3cfe7e781ffffe7ff13ffff83ffffffe7e7ffe7e7c9ffc9ffc9c9ffc9ffffe7c9ffffe7c9c9e7ffe700000ff0ff27393f93cf2799e799399399240c9f39ffe7e7e7e727ff89ffe7e793ffff83ffffffe7e7ffe7e7c9ffc9ffc9c9ffc9ffffe7c9ffffe7c9c9e7ffe700000ff0ff27393f939f2783e7c339939981819f39ffffcff3e727e723ffffff93ffff83ffffffe7e7ffe7e7c9ffc9ffc9c9ffc9ffffe7c9ffffe7c9c9e7ffe700000ff0ff23393f9339279fe7e7939399ff9fcf3901ffffffe727e7ffffffffc3ffff83ffffffe7e7ffe7e7c9ffc9ffc9c9ffc9ffffe7c9ffffe7c9c9e7ffe700000ff0ff89333f93018f9fe781c711c3ff3fe339ff008181e78fffffffffffe3ffffffffffffe7e7ffe7e7c9ffc9ffc9c9ffc9ffffe7c9ffffe7c9c9e7ffe700000ff0ffffffffffffff3fffffffffffffffffffffffffffe7ffffffffffffffffffffffffffe7e7ffe7e7c9ffc9ffc9c9ffc9ffffe7c9ffffe7c9c9e7ffe700000ff0ffffffffffffffffffffffffffffffffffffffffffe7ffffffffffffffffffffffffffe7e7ffe7e7c9ffc9ffc9c9ffc9ffffe7c9ffffe7c9c9e7ffe700000ff0ffffffffffffffffffffffffffffffffffffffffffe7ffffffffffffffffffffffffffe7e7ffe7e7c9ffc9ffc9c9ffc9ffffe7c9ffffe7c9c9e7ffe700000ff0ffffffffffffffffffffffffffffffffffffffffffe7ffffffffffffffffffffff`,
    // 8x14
    `ffffffffffffffff00ff00ffffffffffffffffffffffffffffffffffffffffffffffffffe7ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00ff00ffffffffffffffffffff83ffffffffffffffffffffffff99ffe7ffffcfffffffffffffffffffffffffffffffffffffffffffffffffff8181ffffe7e7ff00ff00e1c3c080e77ffde7998039ffe7e7e7ffffffffffffffe7999383ffc7cff3cffffffffffffd83e78383f301c7018383fffff9ff9f83ff7e0093efc3c3ff00ff00f199cc9ce73ff9c399249fffc3c3e7ffffffffef01ffc3999339ff93cfe7e7fffffffffff939c73939e33f9f393939e7e7f3ffcf39ff5a2401c7c381ff00c33ce599c080241ff1819924c7ff8181e7e7cfffd7c701ffc3db013d3d939fcff399e7fffffff33187f9f9c33f3ff93939e7e7e7ffe739ff7e0001831800e7189966cd99cf9cc307c1e7992493ffe7e7e7f39f3f93c783ffc3ff933f39c7ffcff3c3e7ffffffe721e7f3f9933f3ff33939ffffcf81f3f3ff7e0001011800c33cbd4287c3cf9c180101e7998439ffe7e7e701013f018383ffe7ff9383f389ffcff30081ff01ffcf09e7e7c3330303e78381ffff9ffff9e7ff423c01831881c33cbd4233e7cf9cc307c1e799e439ffe7e7e7f39f3f9383c7ffe7ff93f9e723ffcff3c3e7ffffff9f19e7cff901f939cf39f9ffffcffff3e7ff661883c7e7e7e718996633818f98241ff181ffe4930181e781e7cf01d701c7ffffff0179cf33ffcff399e7e7ffff3f39e79ff9f3f939cf39f9e7e7e781e7ffff7e00c7efe7e7ff00c33c33e70f18e73ff9c399e4c701c3e7c3ffffffff01efffe7ff93399933ffe7e7ffffe7ffe77f39e73939f33939cf39f3e7e7f3ffcfe7ff8181efffc3c3ff00ff0087e71f19e77ffde799e4f301e7e7e7ffffffffffffffe7ff93833989fff3cfffffe7ffe7ff83810183e18383cf8387ffcff9ff9fe7ffffffffffffffff00ff00ffffff3fffffffffffff39ff81ffffffffffffffffffffffffe7ffffffffffffffcfffffffffffffffffffffffffffffffffffffffffffffffffffffff00ff00ffffffffffffffffffff83ffffffffffffffffffffffffffffe7ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00ff00ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffefffcfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc7ffcfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff83ef03c3070101c339c3e1190f3939c70383038381393939399901c37fc393ffe7ff1fffe3ffc7ff1fe7f91fc7ffffffffffffffeffffffffffffff1e78f89ff39c799999399999939e7f3999f1119939939993981393939399939cf3ff339ffffff9ffff3ff93ff9fe7f99fe7ffffffffffffffcfffffffffffffe7e7e723ff3993993d999d9d3d39e7f3939f01093999399939a5393939939973cf1ff3ffffffff9ffff3ff9bff9fffff9fe7ffffffffffffffcfffffffffffffe7e7e7ffef2139993f9997973f39e7f3939f0101399939999fe7393939c799e7cf8ff3ffffff878783c3839f8993c7f199e71323832389238303339939393901e7e7e7ffc72139833f9987873f01e7f3879f292139833983c7e7393929c7c3cfcfc7f3fffffff3933993390f3389e7f993e701993999338939cf3399399339338ffff1ff932101993f9997972139e7f3939f3931399f2993f3e7393929c7e79fcfe3f3ffffff83993f33019f3399e7f987e72999399933998fcf339929c739e7e7e7e7ff392339993d999d9f3939e733939d3939399f219939e739930193e73dcff1f3ffffff33993f333f9f3399e7f993e729993999339fe3cf339929c739cfe7e7e7ff393f39999993999f9939e73399993939939f839939e739c78339e739cff9f3ffffff33993933399f8399e7f999e729993983839f39c933c301938199e7e7e7ff01833903c307010fc539c38719013939c70ff31983c383ef9339c301c3fdc3ffffff89838389830ff319c39919c33999839ff30f83e389e79339f901f1e78ffffffffffffffffffffffffffffffffffffffff1ffffffffffffffffffffffffffffffffffffffffff33ffff99ffffffffff9ff3fffffffffffffff3ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00ffffffffffffff87ffffc3ffffffffff0fe1ffffffffffffff07ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc7e7ffffffffffffffffffffffffffffffffffffffff89ffffffffffffffffffffeeaa22e7e7e7c9ffffc9c9ffc9c9e7fffffff3efff9fc7ffefff9fffe79f3993cfffffefff9fcf9fff3939e7c7ff07f1e7f3e7e7ff23c3c7ffffff3f3fffffffbb5588e7e7e7c9ffffc9c9ffc9c9e7ffc333e7c733cf93ffc733cf99c3cf39c79fffc1c739cf87cf393939e7939933e4cfe7cfcf89ff9393cfffff3f3fe7ffffeeaa22e7e7e7c9ffffc9c9ffc9c9e7ff9933cf9333e7c7ff9333e79999e7efffffff939339e733e739c7ffc39b9933e79fcf9f9f23399393cfffff3939e7ffffbb5588e7e7e7c9ffffc9c9ffc9c9e7ff3dffffffffffffc3ffffffffffffc7c7013333ffffffffffff9339999fc307e7ffffffffff19c1c7ffffff3333ffc927eeaa22e7e7e7c9ffffc9c9ffc9c9e7ff3f33838787878799838383c7c7c7939399893383838333333939399f0fe73be787c783332309ffffcfffff2727e79393bb5588e7e707c9ff0709c90109c907ff3f3339f3f3f3f39f393939e7e7e739399fc90139393933333939399f9f813381f3e7393399018183cf0101cfcfe727c9eeaa22e7e7e7c9ffe7f9c9f9f9c9e7ff3d33018383838399010101e7e7e739398381333939393333393939999fe721e783e739339921ffff9f3ff99f99c39393bb5588e7070709010709c9090101070799333f33333333c33f3f3fe7e7e701019f27333939393333393939c39f8133e733e739339931ffff393ff92331c3c927eeaa22e7e7e7c9c9e7c9c9c9ffffffe7c3333933333333f3393939e7e7e739399927333939393333819339e719e733e733e739339939ffff393ff97961c3ffffbb5588e7e7e7c9c9e7c9c9c9ffffffe7f3898389898989f9838383c3c3c339390191318383838989f9c783e703e739e789c383899939ffff83fffff3c1e7ffffeeaa22e7e7e7c9c9e7c9c9c9ffffffe7f9ffffffffffffc3fffffffffffffffffffffffffffffffff3ffffffffffff27ffffffffffffffffffffffe7f9ffffffbb5588e7e7e7c9c9e7c9c9c9ffffffe783ffffffffffffffffffffffffffffffffffffffffffffff87ffffffffffff8fffffffffffffffffffffffc1f9ffffffeeaa22e7e7e7c9c9e7c9c9c9ffffffe7ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffbb5588e7e7e7c9c9e7c9c9c9ffffffe7e7e7ffe7ffe7e7c9c9ffc9ffc9ffc9e7c9ffffc9e7ffffc9e7e7ff00ff0ff000ffffffffffffffffffffffffffffffffffffffffffe7ffffffffffffffffffffe7e7ffe7ffe7e7c9c9ffc9ffc9ffc9e7c9ffffc9e7ffffc9e7e7ff00ff0ff000ffffffffffffffffffffffffffffffffffffffffffe7ffffc7fffff0278fffffe7e7ffe7ffe7e7c9c9ffc9ffc9ffc9e7c9ffffc9e7ffffc9e7e7ff00ff0ff000ffff01ff01ffffff81c7c7e1fffce3ffffffcff3f1e7ffff93fffff39327ffffe7e7ffe7ffe7e7c9c9ffc9ffc9ffc9e7c9ffffc9e7ffffc9e7e7ff00ff0ff000ffff39ff39ffffffe79393cffff9cf8301e7e7e7e4e7e7ff93fffff393cfffffe7e7ffe7ffe7e7c9c9ffc9ffc9ffc9e7c9ffffc9e7ffffc9e7e7ff00ff0ff000ff8339019fff9989c33939e7ff819f39ffe7f3cfe4e7e789c7fffff3939f83ffe7e7ffe7ffe7e0c9c8c00800c8000800c900ffc9e0e0ffc900e7ff00ff0ff00089393f93cf819923993939f381249f39ff81f99fe7e7ff23fffffff3933783ffe7e7ffe7ffe7e7c9cfcfffffcfffffffc9ffffc9e7e7ffc9e7e7ff00ff0ff00023033f93e72799e7990139c12424833901e7f3cfe7e781ffffe7fff3930783ffe00000e00000e0c8c0c80008c8000800000000c0e0e0c0000007e000000ff0ff27393f93cf2799e799399399240c9f39ffe7e7e7e7e7ff89ffe7e713ffff83ffffffe7e7ffe7e7c9ffc9ffc9c9ffc9ffffe7c9ffffe7c9c9e7ffe700000ff0ff27393f939f2783e7c339939981819f39ffffcff3e727e723ffffff93ffff83ffffffe7e7ffe7e7c9ffc9ffc9c9ffc9ffffe7c9ffffe7c9c9e7ffe700000ff0ff23033f9339279fe7e7939399ff9fcf3901ffffffe727e7ffffffffc3ffff83ffffffe7e7ffe7e7c9ffc9ffc9c9ffc9ffffe7c9ffffe7c9c9e7ffe700000ff0ff893f3f93018f9fe781c711c3ff3fe339ff008181e78fffffffffffe3ffffffffffffe7e7ffe7e7c9ffc9ffc9c9ffc9ffffe7c9ffffe7c9c9e7ffe700000ff0ffff3fffffffff3fffffffffffffffffffffffffffe7ffffffffffffffffffffffffffe7e7ffe7e7c9ffc9ffc9c9ffc9ffffe7c9ffffe7c9c9e7ffe700000ff0ffffbfffffffffffffffffffffffffffffffffffffe7ffffffffffffffffffffffffffe7e7ffe7e7c9ffc9ffc9c9ffc9ffffe7c9ffffe7c9c9e7ffe700000ff0ffffffffffffffffffffffffffffffffffffffffffe7ffffffffffffffffffffff`,
];

class CharMap implements ICharmap {
    constructor(public width: number, public height: number, private data_: Buffer) { }
    data() { return this.data_; }
    charOffset(code: number): number[] {
        // Images have 4 rows of 64 characters each.
        return [this.width * (code % 64), this.height * Math.floor(code / 64)];
    }
}
const hexValue = new Map([
    ['0', 0], ['1', 1], ['2', 2], ['3', 3], ['4', 4], ['5', 5], ['6', 6], ['7', 7],
    ['8', 8], ['9', 9], ['a', 10], ['b', 11], ['c', 12], ['d', 13], ['e', 14], ['f', 15],
]);
function readHexString(hex: string): number[] {
    const result: number[] = [];
    for (let i = 0; i < hex.length; i++) {
        let val = hexValue.get(hex[i]);
        if (val !== undefined) {
            result.push(val);
        }
    }
    return result;
}
function newCharmap(name: CharmapName) {
    // charmaps are stored as 1-bit per pixel, hex.
    // Expand to a 1 byte per pixel Buffer.
    const pc = readHexString(charmapData[name]);
    let charHeight: number = 0;
    switch (name) {
        case CharmapName.k8x8:
            charHeight = 8;
            break;
        case CharmapName.k8x16:
            charHeight = 16;
            break;
        case CharmapName.k8x14:
            charHeight = 14;
            break;
    }
    const buf = new Buffer(512, charHeight * 4);

    for (let i = 0; i < pc.length; i++) {
        const nibble = pc[i];
        let offset = i * 4;
        for (let bit = 8; bit != 0; bit = bit >> 1) {
            buf.data[offset] = (nibble & bit) ? 0 : 255;
            offset++;
        }
    }
    return new CharMap(8, charHeight, buf);
}

export function get8x16(): ICharmap { return newCharmap(CharmapName.k8x16); }
export function get8x8(): ICharmap { return newCharmap(CharmapName.k8x8); }
export function get8x14(): ICharmap { return newCharmap(CharmapName.k8x14); }
